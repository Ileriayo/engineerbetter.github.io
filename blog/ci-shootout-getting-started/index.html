<!doctype html><html lang=pl><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title>CI Shootout: Getting started with Jenkins, Concourse, Tekton and Argo Workflows | EngineerBetter | More than Cloud Platform specialists</title><link rel=stylesheet href="/css/main.css?v=4"><link rel=stylesheet href=/css/syntax.css><link rel=icon type=image/png href=/img/favicon.png><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-74442484-1","auto"),ga("send","pageview")</script><script src=//load.sumome.com/ data-sumo-site-id=7c63408cd1c29faa63d20123ff629d524df6674695e4305a0e602f2bbf431038 async></script>
<script type=text/javascript>var _iub=_iub||[];_iub.csConfiguration={banner:{textColor:"#dadada",backgroundColor:"#5A5A5A"},lang:"en",siteId:939573,cookiePolicyId:8251825}</script><script type=text/javascript src=//cdn.iubenda.com/cookie_solution/safemode/iubenda_cs.js async></script></head><body><section id=menu-nav-top class="menu fixed-menu clearfix"><div class=menu_contact><p class=menu_contact-number>+44 (0) 20 7846 0140</p><a href=mailto:contact@engineerbetter.com class=menu_contact-us>Contact us</a></div><div class="menu_header clearfix"><button class=menu_header-button>
<span class="icon-bar top-bar"></span>
<span class="icon-bar middle-bar"></span>
<span class="icon-bar bottom-bar"></span></button>
<a href=/ class=menu_header-logo><img class=logo-header-img alt=Brand src=/img/engineer-better-logo.svg></a></div></section><div class=menu_list><button class=menu_list-close><p>&#x2716;</p></button><div class=menu_list-inner-wrap><p class=menu_list-phone>+44 (0) 20 7846 0140</p><a class=menu_list-contact-btn href=mailto:contact@engineerbetter.com>Contact us&nbsp;<span>&#xe900;</span></a><ul class=menu_list-links><li><a href=/how-we-work/>How we work</a></li><li><a href=/our-services/>Our services</a></li><li><a href=/success-stories/>Success stories</a></li><li><a href=/why-cloud-native/>why cloud-native?</a></li><li><a href=/about-us/>About us</a></li><li><a href=/blog/>Blog</a></li></ul><div class=menu_list-icons><a href=https://twitter.com/EngineerBetter><img src=/img/twitter.svg alt="Twitter profile"></a>
<a href=https://github.com/EngineerBetter><img src=/img/github.svg alt="Github profile"></a></div><div class=menu_list-bot-menu><a href=/blog/>Blog</a><span>|</span><a href=/join-our-team/>Careers</a><span>|</span><a href=//www.iubenda.com/privacy-policy/8251825 class="iubenda-nostyle no-brand iubenda-embed" title="Privacy Policy">Privacy</a><script type=text/javascript>(function(e,t){var n=function(){var e=t.createElement("script"),n=t.getElementsByTagName("script")[0];e.src="//cdn.iubenda.com/iubenda.js",n.parentNode.insertBefore(e,n)};e.addEventListener?e.addEventListener("load",n,!1):e.attachEvent?e.attachEvent("onload",n):e.onload=n})(window,document)</script></div></div></div><section class="menu-banner-top_wrap parallax is-page"><div class=menu-banner-top><div class=menu-banner-top_contact><a class=menu-banner-top_number href="tel:+44 (0) 20 7846 0140">+44 (0) 20 7846 0140</a>
<a class=menu-banner-top_contact-us href=mailto:contact@engineerbetter.com>Contact us</a></div><div class=menu-banner-top_btn-wrap><button class=menu_header-button>
<span class="icon-bar top-bar"></span>
<span class="icon-bar middle-bar"></span>
<span class="icon-bar bottom-bar"></span></button></div><div class="menu-banner-top_logo clearfix"><a href=/ class=home-banner_logo-img><img class=logo-img alt=Brand src=/img/engineer-better-logo.svg></a></div></div><div class=home-banner><div class="home-banner_list clearfix"><div class=home-banner_list-category><ul><li><a href=ileri.com/how-we-work/>How we work</a></li><li><a href=ileri.com/our-services/>Our services</a></li><li><a href=ileri.com/success-stories/>Success Stories</a></li><li><a href=ileri.com/why-cloud-native/>Why Cloud-Native?</a></li><li><a href=ileri.com/about-us/>About us</a></li><li><a href=ileri.com/blog/>Blog</a></li></ul></div><div class=home-banner_textarea><h1 class=home-banner_textarea-header>Our <strong>blog&nbsp;<span>&#xe900;</span></strong></h1><div class=home-banner_textarea-wrap><p class=home-banner_textarea-description>Get the very latest updates about recent projects, team updates, thoughts and industry news from our team of EngineerBetter experts.</p></div></div></div></div></section><section class=blog-page><div class=blog-page_container><h1>CI Shootout: Getting started with Jenkins, Concourse, Tekton and Argo Workflows</h1><p class=blog-page_details>Oct 4, 2021<span>|</span> Tom Godkin</p><div class=blog-page_image><img src=/img/blog/gunfight.jpg></div><p>At EngineerBetter we&rsquo;ve evaluated four self-hosted CI systems in order to compare them against each other: <a href=https://www.jenkins.io/>Jenkins</a>, <a href=https://concourse-ci.org/>Concourse</a>, <a href=https://tekton.dev/>Tekton</a> and <a href=https://argoproj.github.io/workflows/>Argo Workflows</a>. For each CI system we&rsquo;ve created some pipelines that:</p><ul><li>Run pre-deployment static analysis over various forms of Infrastructure as Code</li><li>Deploy a <a href=https://kubernetes.io/>Kubernetes</a> cluster to a staging environment</li><li>Deploy the <a href=https://github.com/microservices-demo/microservices-demo>Sock Shop</a> application to the cluster</li><li>Run an acceptance test on the deployed application</li><li>Promote the deployment by triggering an identical production pipeline</li></ul><p>Across a series of blog posts, we&rsquo;ll be evaluating how each CI system supports the following use cases:</p><ul><li><em>This post</em> - <a href=#1-install-and-configure-the-ci-system>1. <strong>Install</strong> and configure the CI system</a></li><li><em>This post</em> - <a href=#2-run-a-hello-world-task>2. <strong>Run</strong> a &ldquo;Hello, World&rdquo; task</a></li><li><a href=/blog/ci-shootout-inputs-and-outputs><em>Second post</em></a> - 3. <strong>Trigger</strong> when external resources (eg Git repos, S3 buckets) change</li><li><a href=/blog/ci-shootout-inputs-and-outputs><em>Second post</em></a> - 4. Use <strong>inputs and outputs to tasks</strong></li><li><a href=/blog/ci-shootout-inputs-and-outputs><em>Second post</em></a> - 5. Write <strong>outputs externally</strong> (like making a Git commit or pushing a file to S3)</li><li><a href=/blog/ci-shootout-reuse><em>Third post</em></a> - 6. <strong>Re-use</strong> pipeline configuration</li><li><a href=/blog/ci-shootout-reuse><em>Third post</em></a> - 7. Use the CI system as a <strong>build monitor</strong></li><li><a href=/blog/ci-shootout-conclusion><em>Final post</em></a> - 8. Conclusion</li></ul><p>In this post we&rsquo;ll explore the first two of the use cases listed above. In each section we&rsquo;ll give each CI system a rating of either <em>Poor</em>, <em>Mediocre</em>, <em>Good</em> or <em>Great</em>.</p><h2 id=1-install-and-configure-the-ci-system>1. Install and Configure the CI system</h2><p>Just how difficult is it to get from not having a CI system to having one? Here we answer that question by exploring how much configuration was needed and the amount of manual work required in each case. We deployed each CI system to an already-existing Kubernetes.</p><h3 id=jenkins---mediocre>Jenkins - <em>Mediocre</em></h3><p>We used <a href=https://github.com/EngineerBetter/iac-example/tree/main/helmfile.d>Helm to install Jenkins in a single command</a>; installation itself was seamless and trivial. Configuration of Jenkins was less trivial and we found ourselves wanting to <a href=https://github.com/EngineerBetter/iac-example/blob/main/config/default/jenkins.yaml>customise Jenkins&rsquo; default configuration</a>. Jenkins <a href=https://github.com/jenkins-infra/charts/blob/master/config/default/jenkins-infra.yaml>configuration ships with mostly good defaults</a>, but at ~600 lines of YAML that default configuration can be daunting when you inevitably need to change something. For example, we wanted to be explicit about which plugins we required (via Infrastructure as Code) such as Blue Ocean (a prettier pipeline UI), so we specified that in <a href=https://github.com/EngineerBetter/iac-example/blob/8032c1a299e4d691b72831c46a272ec5550d9f8a/config/default/jenkins.yaml>our configuration file</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create a helmfile.d directory with the below helmfile config</span>
</span></span><span class=line><span class=cl><span class=c1># Custom Jenkins configuration is linked in the above paragraph</span>
</span></span><span class=line><span class=cl>helmfile apply
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>helmDefaults</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>atomic</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>force</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=m>480</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>wait</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>releases</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>chart</span><span class=p>:</span><span class=w> </span><span class=l>jenkins/jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>3.3.18</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>values</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;../config/default/jenkins.yaml&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>set</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>repositories</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>jenkins</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://charts.jenkins.io</span><span class=w>
</span></span></span></code></pre></div><p> </p><h3 id=concourse---great>Concourse - <em>Great</em></h3><p>We followed <a href=https://github.com/concourse/concourse-chart>Concourse&rsquo;s own guide to installing Concourse via a Helm chart</a>. Installation was simple and it worked without issue.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add concourse https://concourse-charts.storage.googleapis.com/
</span></span><span class=line><span class=cl>helm install concourse concourse/concourse
</span></span></code></pre></div><p> </p><h3 id=tekton---good>Tekton - <em>Good</em></h3><p>We followed <a href=https://tekton.dev/docs/getting-started/>Tekton&rsquo;s Getting Started guide</a> to install Tekton via four kubectl commands that reference publicly available Kubernetes YAML files. It worked for us out of the box without tweaking anything and was ready within a minute or two.</p><p>Tekton required installation of four separate components for our use case: <a href=https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml>pipelines</a>, <a href=https://storage.googleapis.com/tekton-releases/dashboard/latest/tekton-dashboard-release.yaml>dashboard</a>, <a href=https://storage.googleapis.com/tekton-releases/triggers/latest/release.yaml>triggers</a> and <a href=https://storage.googleapis.com/tekton-releases/triggers/latest/interceptors.yaml>interceptors</a>. I&rsquo;d guess that it&rsquo;d be the exception to only want to install a subset of these four so perhaps the Getting Started experience could be improved by providing a single Kubernetes YAML containing all four.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>tekton_releases</span><span class=o>=</span><span class=s2>&#34;https://storage.googleapis.com/tekton-releases&#34;</span>
</span></span><span class=line><span class=cl>kubectl apply --filename <span class=s2>&#34;</span><span class=si>${</span><span class=nv>tekton_releases</span><span class=si>}</span><span class=s2>/pipeline/latest/release.yaml&#34;</span>
</span></span><span class=line><span class=cl>kubectl apply --filename <span class=s2>&#34;</span><span class=si>${</span><span class=nv>tekton_releases</span><span class=si>}</span><span class=s2>/dashboard/latest/tekton-dashboard-release.yaml&#34;</span>
</span></span><span class=line><span class=cl>kubectl apply --filename <span class=s2>&#34;</span><span class=si>${</span><span class=nv>tekton_releases</span><span class=si>}</span><span class=s2>/triggers/latest/release.yaml&#34;</span>
</span></span><span class=line><span class=cl>kubectl apply --filename <span class=s2>&#34;</span><span class=si>${</span><span class=nv>tekton_releases</span><span class=si>}</span><span class=s2>/triggers/latest/interceptors.yaml&#34;</span>
</span></span></code></pre></div><p> </p><h3 id=argo-workflows---great>Argo Workflows - <em>Great</em></h3><p>We followed <a href=https://argoproj.github.io/argo-workflows/quick-start/>Argo Workflows&rsquo; own Quick Start instructions</a> to install Argo Workflows via a few kubectl commands that referenced <a href=https://raw.githubusercontent.com/argoproj/argo-workflows/stable/manifests/quick-start-postgres.yaml>publicly available Kubernetes YAML files</a>. Unlike Tekton, there is only a single YAML manifest to apply. It worked for us out of the box without tweaking anything and was ready within a minute or two.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>manifests</span><span class=o>=</span><span class=s2>&#34;https://raw.githubusercontent.com/argoproj/argo-workflows/stable/manifests&#34;</span>
</span></span><span class=line><span class=cl>kubectl create namespace argo
</span></span><span class=line><span class=cl>kubectl apply --namespace argo --filename <span class=s2>&#34;</span><span class=si>${</span><span class=nv>manifests</span><span class=si>}</span><span class=s2>/quick-start-postgres.yaml
</span></span></span></code></pre></div><p> </p><h3 id=summary>Summary</h3><p>The <strong>easiest installation experience was with Concourse and Argo Workflows</strong>, Tekton came in at a close second due to the additional context requirements of needing to install several components.</p><p><strong>Jenkins falls far behind</strong> the other options here due to the difficulty we had in understanding how to define everything about the installation (ie including plugins) in code.</p><h2 id=2-run-a-hello-world-task>2. Run a &ldquo;Hello, World&rdquo; task</h2><p>Now that we have a CI system, how difficult is it to run our first task? Here we&rsquo;ll demonstrate how hard it was to write the task definition and then configure it in the CI system.</p><h3 id=jenkins---poor>Jenkins - <em>Poor</em></h3><p>Being the oldest of the CI systems under evaluation, it&rsquo;s not surprising that the way in which pipelines are written has been revisited a few times in its history. We wrote a &ldquo;Hello World&rdquo; job using the most modern pipeline syntax that Jenkins offers: <a href=https://www.jenkins.io/doc/book/pipeline/syntax/>Declarative Pipelines</a>.</p><p>Jenkins pipelines are configured in two ways: manually through the UI or by submitting declarative XML using the Jenkins CLI. We chose to use the latter so that we can source control our pipeline definitions.</p><p>The configuration references <em>another</em> file containing the bulk of the pipeline definition (often called a Jenkinsfile) which is written using the Declarative Pipelines DSL. There is a level of redundancy between these two files. It&rsquo;s also possible to change the configuration of the pipeline within the Jenkinsfile that would result in the XML stored in source control differing from the one actually configured on Jenkins after a pipeline run.</p><p>Although we could achieve source controlled pipeline configuration, there were two &lsquo;flies in the ointment&rsquo;.</p><p>Firstly, the XML file was extremely difficult to understand and author, and so we found it easier to configure our pipeline via Jenkins&rsquo; UI and then use the CLI&rsquo;s &ldquo;get-job&rdquo; subcommand to then store the generated configuration in source control.</p><p>Secondly, the Jenkins CLI has separate &ldquo;create-job&rdquo; and &ldquo;update-job&rdquo; subcommands, which means any automation that sets pipelines has to figure out if it&rsquo;s already set to know which command to use.</p><p>Defining the &ldquo;Hello World&rdquo; pipeline using the Declarative Pipeline syntax was trivial, and it is also easy to read. Executing the task is trivial via the Jenkins UI.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># First deploy</span>
</span></span><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -jar <span class=s2>&#34;</span><span class=nv>$JENKINS_CLI_JAR</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -s <span class=s2>&#34;</span><span class=nv>$JENKINS_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -auth <span class=s2>&#34;</span><span class=si>${</span><span class=nv>JENKINS_USERNAME</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>JENKINS_PASSWORD</span><span class=si>}</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    create-job <span class=s1>&#39;Hello World&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  &lt; pipeline.xml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Subsequent deploys</span>
</span></span><span class=line><span class=cl>java <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -jar <span class=s2>&#34;</span><span class=nv>$JENKINS_CLI_JAR</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -s <span class=s2>&#34;</span><span class=nv>$JENKINS_URL</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -auth <span class=s2>&#34;</span><span class=si>${</span><span class=nv>JENKINS_USERNAME</span><span class=si>}</span><span class=s2>:</span><span class=si>${</span><span class=nv>JENKINS_PASSWORD</span><span class=si>}</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    update-job <span class=s1>&#39;Hello World&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  &lt; pipeline.xml
</span></span></code></pre></div><p><em>pipeline.Jenkinsfile</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=kt>def</span> <span class=n>ciImage</span> <span class=o>=</span> <span class=s1>&#39;engineerbetter/iac-example-ci:15-promote&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pipeline</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>agent</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>kubernetes</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>yaml</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>      apiVersion: v1
</span></span></span><span class=line><span class=cl><span class=s2>      kind: Pod
</span></span></span><span class=line><span class=cl><span class=s2>      spec:
</span></span></span><span class=line><span class=cl><span class=s2>        containers:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: iac
</span></span></span><span class=line><span class=cl><span class=s2>        image: ${ciImage}
</span></span></span><span class=line><span class=cl><span class=s2>        command:
</span></span></span><span class=line><span class=cl><span class=s2>        - cat
</span></span></span><span class=line><span class=cl><span class=s2>        tty: true
</span></span></span><span class=line><span class=cl><span class=s2>      &#34;&#34;&#34;</span><span class=o>.</span><span class=na>stripIndent</span><span class=o>()</span>
</span></span><span class=line><span class=cl>      <span class=n>defaultContainer</span> <span class=s1>&#39;iac&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>stages</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>stage</span><span class=o>(</span><span class=s1>&#39;Hello, World!&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>steps</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sh</span> <span class=s1>&#39;echo &#34;Hello, World!&#34;&#39;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p><em>pipeline.xml</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#39;1.1&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;flow-definition</span> <span class=na>plugin=</span><span class=s>&#34;workflow-job@2.40&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;actions&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobAction</span>
</span></span><span class=line><span class=cl>    <span class=na>plugin=</span><span class=s>&#34;pipeline-model-definition@1.8.4&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction</span>
</span></span><span class=line><span class=cl>    <span class=na>plugin=</span><span class=s>&#34;pipeline-model-definition@1.8.4&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;jobProperties/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;triggers/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;parameters/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;options/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/org.jenkinsci.plugins.pipeline.modeldefinition.actions.DeclarativeJobPropertyTrackerAction&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/actions&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;description&gt;&lt;/description&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;keepDependencies&gt;</span>false<span class=nt>&lt;/keepDependencies&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;properties&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;jenkins.model.BuildDiscarderProperty&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;strategy</span> <span class=na>class=</span><span class=s>&#34;hudson.tasks.LogRotator&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;daysToKeep&gt;</span>-1<span class=nt>&lt;/daysToKeep&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;numToKeep&gt;</span>200<span class=nt>&lt;/numToKeep&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactDaysToKeep&gt;</span>-1<span class=nt>&lt;/artifactDaysToKeep&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactNumToKeep&gt;</span>-1<span class=nt>&lt;/artifactNumToKeep&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/strategy&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/jenkins.model.BuildDiscarderProperty&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;org.jenkinsci.plugins.workflow.job.properties.DisableConcurrentBuildsJobProperty/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/properties&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;definition</span> <span class=na>class=</span><span class=s>&#34;org.jenkinsci.plugins.workflow.cps.CpsScmFlowDefinition&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>plugin=</span><span class=s>&#34;workflow-cps@2.90&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;scm</span> <span class=na>class=</span><span class=s>&#34;hudson.plugins.git.GitSCM&#34;</span> <span class=na>plugin=</span><span class=s>&#34;git@4.7.1&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;configVersion&gt;</span>2<span class=nt>&lt;/configVersion&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;userRemoteConfigs&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;hudson.plugins.git.UserRemoteConfig&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;url&gt;</span>my_repo_url<span class=nt>&lt;/url&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;credentialsId&gt;</span>git<span class=nt>&lt;/credentialsId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/hudson.plugins.git.UserRemoteConfig&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/userRemoteConfigs&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;branches&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;hudson.plugins.git.BranchSpec&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;name&gt;</span>main<span class=nt>&lt;/name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/hudson.plugins.git.BranchSpec&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/branches&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;doGenerateSubmoduleConfigurations&gt;</span>false<span class=nt>&lt;/doGenerateSubmoduleConfigurations&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;submoduleCfg</span> <span class=na>class=</span><span class=s>&#34;empty-list&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;extensions/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/scm&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;scriptPath&gt;</span>pipeline.Jenkinsfile<span class=nt>&lt;/scriptPath&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;lightweight&gt;</span>true<span class=nt>&lt;/lightweight&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/definition&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;triggers/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;disabled&gt;</span>false<span class=nt>&lt;/disabled&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/flow-definition&gt;</span>
</span></span></code></pre></div><p> </p><h3 id=concourse---great-1>Concourse - <em>Great</em></h3><p>Concourse has the best problem domain abstraction of the four systems under evaluation. <a href=https://concourse-ci.org/pipelines.html>Pipelines</a> and <a href=https://concourse-ci.org/tasks.html>Tasks</a> are configured by YAML, but unlike Tekton and Argo Workflows the YAML configuration is bespoke to Concourse and not made of Kubernetes resources - which makes sense since Concourse existed before Kubernetes was popular.</p><p>Generally speaking task definitions are not &lsquo;applied&rsquo; to Concourse, instead Concourse pipelines will look for them at runtime based on the pipeline configuration. Tasks can also be executed directly from Concourse&rsquo;s CLI, &ldquo;<a href=https://concourse-ci.org/fly.html>fly</a>&rdquo; (which can be downloaded from the UI of your Concourse).</p><p>Since Concourse is not Kubernetes native, there&rsquo;s a step required in order to authenticate with Concourse the first time you interact with it. You can authenticate using your GitHub account, amongst other options.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>fly --target ci login --concourse-url <span class=s2>&#34;</span><span class=nv>$CONCOURSE_URL</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>fly --target ci execute --config hello.yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>linux</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>image_resource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>registry-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>source</span><span class=p>:</span><span class=w> </span>{<span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=l>busybox}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>echo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;Hello, World!&#34;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></div><p> </p><h3 id=tekton---great>Tekton - <em>Great</em></h3><p>Everything about Tekton is Kubernetes native, so it follows that defining a <a href=https://tekton.dev/docs/pipelines/>Tekton Task</a> is as simple as creating an appropriate Kubernetes YAML file and applying it. Tekton stores defined Tasks as Kubernetes resources and executes them by applying another resource known as a TaskRun. Since it&rsquo;s all Kubernetes native, source controlling these tasks is easily achievable but it also means there&rsquo;s a bit of boilerplate since the abstraction over Kubernetes is (deliberately) pretty shallow.</p><p>Likewise, Tekton Pipelines are a Kubernetes resource that represents a sequence of Tasks to be executed. PipelineRuns are the resources that execute Pipelines.</p><p>Tasks and Pipelines may also be executed by the Tekton CLI (which proxies authentication via the active kubeconfig) rather than defining and applying a TaskRun or PipelineRun.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply --filename hello-task.yaml
</span></span><span class=line><span class=cl>tkn task start hello-world-task
</span></span><span class=line><span class=cl>tkn taskrun logs --last --follow
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>tekton.dev/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Task</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w> </span>{<span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>hello-world-task}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>hello-world</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker/whalesay</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>echo, &#34;Hello, World!&#34;]</span><span class=w>
</span></span></span></code></pre></div><p> </p><h3 id=argo-workflows---great-1>Argo Workflows - <em>Great</em></h3><p>As with Tekton, resources in Argo Workflows are simply shallow abstractions over Kubernetes resources. Kubernetes YAML is used to define <a href=https://argoproj.github.io/argo-workflows/workflow-templates/>Argo Workflows&rsquo; Templates</a>. Templates are then composed into Workflows using another <code>Kind</code> of Kubernetes resource containing a directed acyclic graph (DAG) syntax when there&rsquo;s more than one template. The Workflows are then executed using the Argo Workflows CLI.</p><p>Unlike Tekton Tasks and Pipelines, WorkflowTemplates cannot be executed outside the context of a Workflow; the amount of configuration required to execute the Hello World template is still trivial.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>argo --namespace argo submit hello-workflow.yaml --watch
</span></span><span class=line><span class=cl>argo --namespace argo logs @latest
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>argoproj.io/v1alpha1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Workflow</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w> </span>{<span class=nt>generateName</span><span class=p>:</span><span class=w> </span><span class=l>hello-workflow-}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>entryPoint</span><span class=p>:</span><span class=w> </span><span class=l>hello</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>templates</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>hello</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>container</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>busybox</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>echo, hello]</span><span class=w>
</span></span></span></code></pre></div><p> </p><h3 id=summary-1>Summary</h3><p>Getting started with Concourse, Tekton and Argo required very little effort; each required at most 10 lines of YAML and a few commands to execute. Looking at the output of each was similarly trivial.</p><p>Both Jenkins and Argo Workflows required the execution of a pipeline (or Workflow) in order to execute a single task. This didn&rsquo;t add to the complexity in the case of Argo Workflows, however executing Hello World on Jenkins required orders of magnitude more configuration than the other options and contained a gotcha in the form of the non-idempotent commands.</p><p>Jenkins again fell far behind the competition in this use case with the differences between the Concourse, Tekton and Argo Workflows being negligible.</p><h2 id=scorecard>Scorecard</h2><p> </p><h2 id=next-time>Next time</h2><p>In <a href=/blog/ci-shootout-inputs-and-outputs>the next blog in this series</a> we explore the following three use cases that we first described in the intro:</p><ul><li><em>Trigger pipeline runs when external resources (eg Git repos, S3 buckets) change</em></li><li><em>Use inputs and outputs to tasks</em></li><li><em>Write outputs externally (like making a Git commit or pushing a file to S3)</em></li></ul></div><div class="blog-page_banner clearfix"><div class=blog_banner-text><h2>Get in touch</h2><p>See how much we can help you.<br>Call <span>+44 (0) 20 7846 0140</span> or</br></p><a href=mailto:contact@engineerbetter.com class=cloud-btn2><p>Contact us <span>&#xe900;</span></p></a></div></div></section><footer><div class=footer-background></div><div class="footer_wrap clearfix"><div class=footer_column-list-desktop><ul class=list><li><a href=/how-we-work/><span>&mdash;</span> How we work</a></li><li><a href=/our-services/><span>&mdash;</span> Our services</a></li><li><a href=/success-stories/><span>&mdash;</span> Success stories</a></li><li><a href=/why-cloud-native/><span>&mdash;</span> Why Cloud-Native?</a></li><li><a href=/about-us/><span>&mdash;</span> About us</a></li></ul></div><div class=footer_column-list><ul class=list><li><a href=mailto:contact@engineerbetter.com><span>&mdash;</span> Contact us</a></li><li><a href=/blog/><span>&mdash;</span> Blog</a></li><li><a href=/join-our-team/><span>&mdash;</span> Join our team</a></li><li><a href=//www.iubenda.com/privacy-policy/8251825 class="iubenda-nostyle no-brand iubenda-embed" title="Privacy Policy"><span>&mdash;</span> Privacy Policy</a><script type=text/javascript>(function(e,t){var n=function(){var e=t.createElement("script"),n=t.getElementsByTagName("script")[0];e.src="//cdn.iubenda.com/iubenda.js",n.parentNode.insertBefore(e,n)};e.addEventListener?e.addEventListener("load",n,!1):e.attachEvent?e.attachEvent("onload",n):e.onload=n})(window,document)</script></li></ul></div><div class=footer_column-icon-wrap><a href=https://twitter.com/EngineerBetter class=footer_column-icon><img class=footer_column-icon-img alt=Brand src=/img/icon-twitter.png></a>
<a href=https://github.com/EngineerBetter class=footer_column-icon><img class=footer_column-icon-img alt=Brand src=/img/icon-git-hub.png></a></div><div class=footer_column-text><p>&copy; Copyright EngineerBetter Ltd</p><p>Registered England & Wales 10141478</p></div></div></footer><script src="/js/jquery-1.11.3.min.js?v=4"></script>
<script src=/js/site.js></script></body></html>